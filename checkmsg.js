const $ = new Env('Rtool检测信息');
var _0xodo='asdggdasgd',_0xodo_=['_0xodo'],_0xf5f3=[_0xodo,'w6XDvMKbTA==','w4VzDx7Cuzkiw5o=','w5JdLcK6w5DDsQ==','wrvorpTmibjlk4boooDmo77lkofmnas=','5p+d5pSx5o+/w5Q=','w6fDtMKKQcOYwozCqFTDgsON','DMKlL1V1XsOxw7rDmg==','w4EVw5w=','wq0NScKp','w5YOwoFpTg==','BRAT','VeWMtOS5kOS4pu+9gA==','w57CpiJeYg==','wrrDojnDh3w5DMOpP2I=','w6gKScOwQBM2cyw=','XU4rdWk=','w7xcFsOxwp0xMg==','dMOgbsKD','DjoQXhw=','w4fDtsKJwqbCg8Oswqo=','WUJUGsKw','w7UsAsK/A8O8w6g=','WkdLGw==','w7QGFMKZMw==','w7tOwroPIg==','T8KAwqnCvg==','w44Owo0=','w4jCisOGcyg=','w75vwrZS','EOacmOWhk+WHquWMnOmEnGo=','wo1W6K2M5LmM57uW6Zin6K2I6IWP5p216K2h5pmVw5w=','w5LCs3zDtcKRLxHDpA==','w6MlwrLCpMKEwqrDiA==','eEZXGMKhwr0=','WMKQwq7Csk/CjiQ=','w7TDucOhAgvCrx0nwo4=','wqc+wqbDp3wz','w4kyw7zDpyk=','Yx3Dl8OxfQ==','F8KOBg==','wrZLwqzCl1gSwq91wpbDhMOlw7nDlmnDpsK5XiXCksKlw7MXcXFAwqgawrByw5Ebw7zDqMKHP8KqwrXComNRKz8rNMOYw40ZesOKwqvoho7mnpzmi67ooqPCm8O3wqzljqDkuLvmlorplKzDmGpXRcO3woJe77yW','wqYHwqzDmGA=','OS0zeSY=','w4rClcKSbsK0','w6bDssOxMwTCqxY4woXDlnDDshrCisOqw4p0','w65qBMKZw48=','w4N5Mi7CsTYow5DCpMOWwpHCqFHDlQ==','wpcrQ3zDr2p5wojDisKfw57DvALCjxvDvRMrVcOZw4ESwojCkWzCp8K0w4gFwo1qZkMRw5vDusOew6Rpfk3DiDQcwrpIKcK0w5g=','QDDDq8OnXg==','wqUDWg==','wr0rQ3zDr2p5wojDisKfw57DoeWFjuaLjOWIlsOg','w6zCgn3DvcKJMg==','JOS6v+i0u+WMnAPCmEXDnsKJcHFVw7wyeQ==','6L6w5pmQ5LyU55q56LWr5Y6q5pS057imwobDrw4=','BDQEHsKS','w4bClMOVw6s7','w5gMYMKqbMK0wpbCkykhw48e5Yee5ois5YmPwqI=','w6LDtsOxBAU=','w7ZcA8Oxwo4g','w6FBw6PDogLCglk=','w6zChcOEUw/CqHkew50Cw75Zwq4kw6kLw5VNwoM/','w7zCs8OKw4g7','woBGGMKaOQ==','aMOZdsKccA==','BsKjLQ==','wop+w6gAwp3CnDsJNXfCh8Ot5YSH5omi5YuREQ==','w48Awp5vSA==','w7LCs8KhWsKsw78aEMKmV8OdO3vDvcKOwpokOTDDiF/CnMO1wqvCugPDjQkzw5p8w74owpVIJl3CliDDl8OJw4jCsyEbbVExDXbCu8O2wrgmw75zwph9w4TCq3E=','wqfDvMKMTsOZwqDCtWrDm8OHTzXDkMOg','wobDvcOVNMKlTjBHPcO+w5HCpRluM0XCqDfDpsOxwpPCig7CkCXCvMKlw4UL','UkEVw7AY','wrZ1AMKcEg==','w5plGQ==','Z8O3wpA=','w78+wqbDp3wz5aSJ5pSk','wrZQKcO2','w7ImwqRiw4nDj2Bb','RldWFMKwwrs=','5pya5paR5oyPDg==','KMKQwphNWg==','w6nCu8OxVBM=','FQLDhsKJw4c=','w6vConjDl8KN','w7xaAcOYwpgNMXwF','woU/wrrDpA==','w4guw7rDjws=','w4LDt8KK','ZOWMluS4qeS4ku+8qg==','MMK8Bml0','Th/Cj1cH','w71QDTTCtQ==','XcO7T8KqZg==','w5lhPC3Cuw==','esOdwpYpMw==','U3TClSti','wqJQL8OkNA==','wqtnFQ==','w7VPw6fDhQY=','jsZrXWjnYiamixS.cAomV.v6tWAKALW=='];if(function(_0x283f23,_0x3a9291,_0x43a4ad){function _0x447003(_0x41c57,_0x3611e8,_0x5c855e,_0x498ae0,_0x39b16f,_0x146589){_0x3611e8=_0x3611e8>>0x8,_0x39b16f='po';var _0x480286='shift',_0x5e202c='push',_0x146589='0.lndew5xnwxo';if(_0x3611e8<_0x41c57){while(--_0x41c57){_0x498ae0=_0x283f23[_0x480286]();if(_0x3611e8===_0x41c57&&_0x146589==='0.lndew5xnwxo'&&_0x146589['length']===0xd){_0x3611e8=_0x498ae0,_0x5c855e=_0x283f23[_0x39b16f+'p']();}else if(_0x3611e8&&_0x5c855e['replace'](/[ZrXWnYxSAVtWAKALW=]/g,'')===_0x3611e8){_0x283f23[_0x5e202c](_0x498ae0);}}_0x283f23[_0x5e202c](_0x283f23[_0x480286]());}return 0x115a1a;};return _0x447003(++_0x3a9291,_0x43a4ad)>>_0x3a9291^_0x43a4ad;}(_0xf5f3,0x81,0x8100),_0xf5f3){_0xodo_=_0xf5f3['length']^0x81;};function _0x1557(_0x3902d8,_0x2a7ae0){_0x3902d8=~~'0x'['concat'](_0x3902d8['slice'](0x0));var _0x1071be=_0xf5f3[_0x3902d8];if(_0x1557['LhPIqH']===undefined){(function(){var _0x58e831=function(){var _0x5329ab;try{_0x5329ab=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x5835a4){_0x5329ab=window;}return _0x5329ab;};var _0xcb9ff=_0x58e831();var _0x3b763f='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0xcb9ff['atob']||(_0xcb9ff['atob']=function(_0x4513fd){var _0x3bfcfe=String(_0x4513fd)['replace'](/=+$/,'');for(var _0x459d42=0x0,_0x39a842,_0x316da9,_0x159d83=0x0,_0xb963aa='';_0x316da9=_0x3bfcfe['charAt'](_0x159d83++);~_0x316da9&&(_0x39a842=_0x459d42%0x4?_0x39a842*0x40+_0x316da9:_0x316da9,_0x459d42++%0x4)?_0xb963aa+=String['fromCharCode'](0xff&_0x39a842>>(-0x2*_0x459d42&0x6)):0x0){_0x316da9=_0x3b763f['indexOf'](_0x316da9);}return _0xb963aa;});}());function _0x222d86(_0x176022,_0x2a7ae0){var _0x280779=[],_0x4d3ccd=0x0,_0x3b9dd6,_0x16ebee='',_0x38e703='';_0x176022=atob(_0x176022);for(var _0x4b1d6e=0x0,_0x57559c=_0x176022['length'];_0x4b1d6e<_0x57559c;_0x4b1d6e++){_0x38e703+='%'+('00'+_0x176022['charCodeAt'](_0x4b1d6e)['toString'](0x10))['slice'](-0x2);}_0x176022=decodeURIComponent(_0x38e703);for(var _0x389997=0x0;_0x389997<0x100;_0x389997++){_0x280779[_0x389997]=_0x389997;}for(_0x389997=0x0;_0x389997<0x100;_0x389997++){_0x4d3ccd=(_0x4d3ccd+_0x280779[_0x389997]+_0x2a7ae0['charCodeAt'](_0x389997%_0x2a7ae0['length']))%0x100;_0x3b9dd6=_0x280779[_0x389997];_0x280779[_0x389997]=_0x280779[_0x4d3ccd];_0x280779[_0x4d3ccd]=_0x3b9dd6;}_0x389997=0x0;_0x4d3ccd=0x0;for(var _0x3f91d8=0x0;_0x3f91d8<_0x176022['length'];_0x3f91d8++){_0x389997=(_0x389997+0x1)%0x100;_0x4d3ccd=(_0x4d3ccd+_0x280779[_0x389997])%0x100;_0x3b9dd6=_0x280779[_0x389997];_0x280779[_0x389997]=_0x280779[_0x4d3ccd];_0x280779[_0x4d3ccd]=_0x3b9dd6;_0x16ebee+=String['fromCharCode'](_0x176022['charCodeAt'](_0x3f91d8)^_0x280779[(_0x280779[_0x389997]+_0x280779[_0x4d3ccd])%0x100]);}return _0x16ebee;}_0x1557['pdLSRY']=_0x222d86;_0x1557['FiwzrV']={};_0x1557['LhPIqH']=!![];}var _0x23188b=_0x1557['FiwzrV'][_0x3902d8];if(_0x23188b===undefined){if(_0x1557['MgZMac']===undefined){_0x1557['MgZMac']=!![];}_0x1071be=_0x1557['pdLSRY'](_0x1071be,_0x2a7ae0);_0x1557['FiwzrV'][_0x3902d8]=_0x1071be;}else{_0x1071be=_0x23188b;}return _0x1071be;};let RToolurl=$['getdata'](_0x1557('0','bLmI'));let RToolhd=$['getdata'](_0x1557('1','!gxj'));let _eid='';let Rtoken=($['isNode']()?process['env'][_0x1557('2','%9dM')]:$[_0x1557('3','riff')]('Rtoken'))||'';let _referer='';let RtokenArr='';let getmsgArr='';let msg_field_name=[];let msg_field_key=[];let msg_field_value=[];!(async()=>{var _0x546c1a={'usmML':function(_0x35a05a,_0x31e474){return _0x35a05a!==_0x31e474;},'XJIaE':_0x1557('4','1JCR'),'ZVZVn':function(_0x52ff35){return _0x52ff35();},'wTSUU':function(_0x502acd){return _0x502acd();},'SMeTy':function(_0x231807,_0x14d7b3){return _0x231807+_0x14d7b3;},'PRGDk':function(_0x2b4abd,_0x1ca028){return _0x2b4abd*_0x1ca028;},'TyoCv':function(_0x42d211,_0x22edee,_0x27abf6){return _0x42d211(_0x22edee,_0x27abf6);},'Nmljy':_0x1557('5','O7wr')};if(_0x546c1a[_0x1557('6','m!IH')](typeof $request,_0x546c1a['XJIaE'])){_0x546c1a['ZVZVn'](RToolck);_0x546c1a[_0x1557('7','kA67')](RTck);}else{console[_0x1557('8','if*$')](_0x1557('9','m!IH')+new Date(_0x546c1a[_0x1557('a','O7wr')](new Date()['getTime'](),_0x546c1a[_0x1557('b','u)C(')](_0x546c1a[_0x1557('c','3iiK')](new Date()[_0x1557('d','1JCR')](),0x3c),0x3e8))+_0x546c1a['PRGDk'](_0x546c1a[_0x1557('e','Y%Y8')](0x8,0x3c),0x3c)*0x3e8)[_0x1557('f',']l(C')]()+_0x1557('10',']l(C'));RtokenArr=await _0x546c1a[_0x1557('11','kA67')](checkEnv,Rtoken,_0x546c1a['Nmljy']);console[_0x1557('12','fSQ4')](_0x1557('13',']l(C')+RtokenArr[_0x1557('14','bLmI')]+_0x1557('15','WYpg'));console['log'](_0x1557('16','u)C(')+RtokenArr);await _0x546c1a[_0x1557('17','qn5i')](getkey);for(let _0x166ce5=0x0;_0x166ce5<0x1;_0x166ce5++){let _0x491c4b=_0x546c1a[_0x1557('18','^7CX')](_0x166ce5,0x1);console[_0x1557('12','fSQ4')](_0x1557('19','RijF')+_0x491c4b+'\x20个账号\x20==========');Rtoken=RtokenArr[_0x166ce5];}}})()[_0x1557('1a','1JCR')](_0x3d33ea=>$[_0x1557('1b','Nb[E')](_0x3d33ea))[_0x1557('1c','wu0D')](()=>$['done']());function getkey(_0x4c913e=0x0){var _0x1d1e50={'wiitH':_0x1557('1d','vMfF'),'FeUej':function(_0x52adb1,_0x48d648){return _0x52adb1<_0x48d648;},'lPCfp':function(_0x57c24e,_0x4c47d3){return _0x57c24e!==_0x4c47d3;},'ZpLPe':function(_0x541c93){return _0x541c93();},'ijzwy':function(_0xee8172,_0x481d63){return _0xee8172===_0x481d63;},'FRjuN':'sRSCh','lLkwS':'CEAgc'};return new Promise(_0x250cda=>{if(_0x1d1e50[_0x1557('1e','^7CX')](_0x1d1e50[_0x1557('1f',']a&X')],_0x1d1e50[_0x1557('20','WYpg')])){let _0x5cc8d7=index+0x1;console[_0x1557('21',']Tbw')](_0x1557('22','pDTD')+_0x5cc8d7+'\x20个账号\x20==========');Rtoken=RtokenArr[index];}else{_eid=RToolurl[_0x1557('23','lCJB')](/eid=(.*?)&/)[0x1];let _0x428b73={'url':_0x1557('24','3iiK')+_eid+_0x1557('25','DS4K')+RtokenArr[0x0]+_0x1557('26','vY$3'),'headers':JSON[_0x1557('27','UmF2')](RToolhd)};$['get'](_0x428b73,async(_0x66be46,_0x52b559,_0x511930)=>{try{_0x511930=JSON[_0x1557('28',']a&X')](_0x511930);if(_0x511930[_0x1557('29',']l(C')]==_0x1d1e50['wiitH']){console[_0x1557('2a','lFM[')](_0x1557('2b','O7wr'));}let _0x353de3=_0x511930[_0x1557('2c','RijF')][_0x1557('2d','pDTD')];getmsgArr=_0x353de3[_0x1557('2e','%9dM')];console['log']('\x0a该报名表格含有'+getmsgArr+_0x1557('2f','if*$'));for(let _0x39fdf7=0x0;_0x1d1e50[_0x1557('30','cKog')](_0x39fdf7,getmsgArr);_0x39fdf7++){if(_0x1d1e50[_0x1557('31','vMfF')](_0x1557('32','4xt&'),_0x1557('33','bLmI'))){msg_field_name[_0x39fdf7]=_0x353de3[_0x39fdf7]['field_name'];msg_field_key[_0x39fdf7]=_0x353de3[_0x39fdf7][_0x1557('34','Nb[E')];}else{ckArr[_0x1557('35','O7wr')](ck);}}console[_0x1557('8','if*$')]('该表格数据分别是：'+msg_field_name);let _0x76da40=_0x511930['data'][_0x1557('36','m!IH')];console[_0x1557('37','N1u)')](_0x1557('38','cKog')+_0x76da40);}catch(_0x3d56d3){}finally{_0x1d1e50[_0x1557('39',']Tbw')](_0x250cda);}},_0x4c913e);}});}async function checkEnv(_0xbf88cf,_0x89836b){var _0x14a6f6={'rgjFh':'invalid\x20access_token','tjqBZ':function(_0x2c1091,_0xdfd742){return _0x2c1091<_0xdfd742;},'xOfoy':function(_0x471029,_0x6891e0){return _0x471029!==_0x6891e0;},'YnRAE':'JFsug','nwBli':function(_0x16481f,_0xf89446){return _0x16481f===_0xf89446;},'qEacA':'xrIAS','Nssrj':_0x1557('3a','MD0&'),'gEdcQ':function(_0x2eff96,_0x26f2d7){return _0x2eff96!==_0x26f2d7;},'xGKla':'uMRil','MatAK':function(_0x33c945,_0x54cbc9){return _0x33c945(_0x54cbc9);}};return new Promise(_0x40a9a9=>{if(_0x14a6f6['xOfoy'](_0x1557('3b',']l(C'),_0x14a6f6[_0x1557('3c','WYpg')])){_0xbf88cf['split']('@')['forEach'](_0x3cd2d0=>{ckArr['push'](_0x3cd2d0);});}else{let _0x21fcfe=[];if(_0xbf88cf){if(_0x14a6f6[_0x1557('3d',']l(C')](_0x14a6f6[_0x1557('3e','lFM[')],_0x1557('3f','PCTE'))){data=JSON[_0x1557('40','RijF')](data);if(data[_0x1557('41',']a&X')]==_0x14a6f6[_0x1557('42','wu0D')]){console['log']('\x0atoken失效');}let _0x48d9a6=data[_0x1557('43','DS4K')][_0x1557('44',']l(C')];getmsgArr=_0x48d9a6[_0x1557('45','Y%Y8')];console['log'](_0x1557('46','!gxj')+getmsgArr+_0x1557('47','m!IH'));for(let _0x511f65=0x0;_0x14a6f6['tjqBZ'](_0x511f65,getmsgArr);_0x511f65++){msg_field_name[_0x511f65]=_0x48d9a6[_0x511f65][_0x1557('48','DS4K')];msg_field_key[_0x511f65]=_0x48d9a6[_0x511f65][_0x1557('49',']Tbw')];}console[_0x1557('4a',']ZTB')]('该表格数据分别是：'+msg_field_name);let _0x50f1c5=data[_0x1557('4b','fSQ4')][_0x1557('4c','lCJB')];console[_0x1557('4d','u)C(')](_0x1557('4e','1IGf')+_0x50f1c5);}else{if(_0xbf88cf['indexOf']('@')!==-0x1){if(_0x14a6f6['nwBli']('hshBb',_0x14a6f6[_0x1557('4f','dYh#')])){msg_field_name[i]=getmsg[i][_0x1557('50','eT(g')];msg_field_key[i]=getmsg[i][_0x1557('51','Iniv')];}else{_0xbf88cf[_0x1557('52','ZjHV')]('@')[_0x1557('53','Nb[E')](_0x5ad68d=>{_0x21fcfe[_0x1557('54','WYpg')](_0x5ad68d);});}}else if(_0x14a6f6[_0x1557('55','u)C(')](_0xbf88cf[_0x1557('56','N1u)')]('\x0a'),-0x1)){_0xbf88cf[_0x1557('57','%9dM')]('\x0a')[_0x1557('58','$X^o')](_0x3d5fd5=>{_0x21fcfe[_0x1557('59','%9dM')](_0x3d5fd5);});}else{if(_0x14a6f6[_0x1557('5a','$X^o')](_0x14a6f6['xGKla'],_0x1557('5b','&3S&'))){_0x21fcfe[_0x1557('5c','riff')](_0xbf88cf);}else{console[_0x1557('5d','lCJB')]('\x0atoken失效');}}_0x14a6f6[_0x1557('5e','vMfF')](_0x40a9a9,_0x21fcfe);}}else{console['log']('\x20'+$[_0x1557('5f','cDoZ')]+_0x1557('60','%9dM')+_0x89836b+_0x1557('61',']ZTB'));}}});};_0xodo='agagag';
function Env(t, e) { class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `\ud83d\udd14${this.name}, \u5f00\u59cb!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), a = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(a, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t) { let e = { "M+": (new Date).getMonth() + 1, "d+": (new Date).getDate(), "H+": (new Date).getHours(), "m+": (new Date).getMinutes(), "s+": (new Date).getSeconds(), "q+": Math.floor(((new Date).getMonth() + 3) / 3), S: (new Date).getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, ((new Date).getFullYear() + "").substr(4 - RegExp.$1.length))); for (let s in e) new RegExp("(" + s + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? e[s] : ("00" + e[s]).substr(("" + e[s]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))); let h = ["", "==============\ud83d\udce3\u7cfb\u7edf\u901a\u77e5\ud83d\udce3=============="]; h.push(e), s && h.push(s), i && h.push(i), console.log(h.join("\n")), this.logs = this.logs.concat(h) } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `\u2757\ufe0f${this.name}, \u9519\u8bef!`, t.stack) : this.log("", `\u2757\ufe0f${this.name}, \u9519\u8bef!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `\ud83d\udd14${this.name}, \u7ed3\u675f! \ud83d\udd5b ${s} \u79d2`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }